<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bahasa Kaili Unde - Cerita Bahasa</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background-color: #fff;
    }
    header {
      background-color: #6200ea; /* Warna ungu contoh */
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 {
      margin: 0;
      font-size: 20px;
    }
    .dropdown select {
      padding: 6px 10px;
      font-size: 14px;
      border-radius: 5px;
      border: none;
    }
    main {
      padding: 20px;
      text-align: center;
    }
    main h2 {
        margin-bottom: 15px; /* Jarak bawah judul video */
    }
    iframe {
      width: 100%;
      max-width: 800px; /* Lebar maksimal video */
      aspect-ratio: 16 / 9; /* Jaga rasio aspek 16:9 */
      height: auto; /* Biarkan tinggi menyesuaikan lebar */
      border: none;
      display: block; /* Agar margin auto berfungsi */
      margin-left: auto;
      margin-right: auto;
    }
    #daftar-video {
      margin-top: 25px; /* Jarak atas dari video */
      text-align: left; 
      max-width: 800px; /* Samakan dengan max-width iframe */
      margin-left: auto;
      margin-right: auto;
      padding: 0 10px; /* Padding kiri kanan agar tidak terlalu mepet */
    }
     #daftar-video h3 {
        margin-bottom: 10px;
        text-align: center; /* Judul daftar video di tengah */
        color: #333;
     }
    #daftar-video button {
      display: block; 
      width: 100%;
      padding: 12px 15px; /* Padding tombol */
      margin-bottom: 8px;
      font-size: 1em;
      text-align: left;
      cursor: pointer;
      background-color: #f1f1f1; /* Warna tombol */
      border: 1px solid #ddd;
      border-radius: 5px;
      transition: background-color 0.2s ease;
    }
    #daftar-video button:hover {
      background-color: #e0e0e0; /* Warna tombol saat hover */
    }
     /* Style tambahan agar lebih responsif */
    @media (max-width: 600px) {
        header {
            flex-direction: column; /* Susun header ke bawah di layar kecil */
            padding: 10px;
        }
        header h1 {
            margin-bottom: 10px; /* Jarak bawah judul header */
        }
        .dropdown select {
            width: 100%; /* Buat dropdown full width */
        }
        main {
            padding: 15px;
        }
        #daftar-video {
            padding: 0 5px;
        }
    }
  </style>
</head>
<body>

  <header>
    <h1>Bahasa Kaili Unde</h1>
    <div class="dropdown">
      <select id="languageSelect" onchange="navigateToLanguage()">
        <option disabled selected>Pilih Bahasa</option>
        <option value="../duano">Bahasa Duano</option>
        <option value="../haloban">Bahasa Haloban</option>
        <option value="../kaimbulawa">Bahasa Kaimbulawa</option>
        <option value="../kaili-unde">Bahasa Kaili Unde</option>
        <option value="../kamaru">Bahasa Kamaru</option>
        <option value="../kioko">Bahasa Kioko</option>
        <option value="../kumbewaha">Bahasa Kumbewaha</option>
        <option value="../lasalimu">Bahasa Lasalimu</option>
        <option value="../malimpung">Bahasa Malimpung</option>
        <option value="../mandar">Bahasa Mandar</option>
        <option value="../pancana">Bahasa Pancana</option>
        <option value="../sarudu">Bahasa Sarudu</option>
        <option value="../sikule">Bahasa Sikule</option>
        <option value="../suwawa">Bahasa Suwawa</option>
        <option value="../toli-toli">Bahasa Toli Toli</option>
      </select>
    </div>
  </header>

  <main>
    <h2>Video Cerita dalam Bahasa Kaili Unde</h2>
    
    <iframe 
        id="youtube-player" 
        src="https://www.youtube.com/embed/videoseries?list=ID_PLAYLIST_ASLI_ANDA&enablejsapi=1" 
        allowfullscreen>
    </iframe>

    <div id="daftar-video">
        <h3>Daftar Video:</h3>
        </div>
  </main>

  <script src="https://www.youtube.com/iframe_api"></script>
  
  <script>
    // 2. Fungsi navigasi dropdown (sudah ada)
    function navigateToLanguage() {
      const selectElement = document.getElementById("languageSelect");
      const selectedValue = selectElement.value;
      if (selectedValue) { // Hanya navigasi jika bukan pilihan "Pilih Bahasa"
          // Asumsi struktur folder: jika file ini ada di /kaili-unde/, 
          // maka value="../mandar" akan mengarah ke /mandar/
          window.location.href = selectedValue + "/"; 
      }
    }
    // Set dropdown ke bahasa saat ini (jika memungkinkan)
    // Ini sedikit tricky karena kita perlu tahu URL saat ini
    // Cara sederhana: coba cocokkan bagian akhir path
    /*
    const currentPathEnd = window.location.pathname.split('/').filter(Boolean).pop();
    const selectDropdown = document.getElementById('languageSelect');
    for (let i = 0; i < selectDropdown.options.length; i++) {
        const optionValueEnd = selectDropdown.options[i].value.split('/').pop();
        if (optionValueEnd === currentPathEnd) {
            selectDropdown.selectedIndex = i;
            break;
        }
    }
    */


    // 3. Kode untuk YouTube Player API
    let player; // Variabel global untuk player

    // Fungsi ini dipanggil otomatis oleh YouTube API setelah scriptnya dimuat
    function onYouTubeIframeAPIReady() {
      console.log("YouTube API Siap.");
      player = new YT.Player('youtube-player', {
        // Tidak perlu menentukan height/width di sini jika sudah diatur CSS
        events: {
          'onReady': onPlayerReady,
          // 'onStateChange': onPlayerStateChange // Aktifkan jika perlu
        }
      });
    }

    // 4. Fungsi yang dipanggil saat pemutar video siap
    function onPlayerReady(event) {
      console.log("Player Siap.");
      const daftarVideoContainer = document.getElementById('daftar-video');
      daftarVideoContainer.innerHTML = '<h3>Daftar Video:</h3>'; // Bersihkan dulu jika ada

      let playlistIds = [];
      try {
        playlistIds = player.getPlaylist(); // Mencoba mendapatkan array ID video
        console.log("Playlist IDs:", playlistIds);
      } catch (e) {
        console.error("Gagal mendapatkan daftar Playlist IDs:", e);
      }

      if (playlistIds && playlistIds.length > 0) {
          // Kita punya daftar ID, buat tombol berdasarkan jumlah video
          playlistIds.forEach((videoId, index) => {
            const button = document.createElement('button');
            
            // Mendapatkan judul video memerlukan YouTube Data API (kompleks).
            // Jadi kita gunakan nomor urut saja.
            button.textContent = `Video ${index + 1}`; // Contoh: Video 1, Video 2, dst.
            
            // Tambahkan event listener untuk klik tombol
            button.onclick = () => {
              console.log(`Memutar video pada index: ${index} (ID: ${videoId})`);
              player.playVideoAt(index); // Perintahkan player memutar video ke-X
              // Opsional: scroll ke atas agar video terlihat
              // window.scrollTo({ top: player.getIframe().offsetTop - 20, behavior: 'smooth' });
            };
            daftarVideoContainer.appendChild(button); // Tambahkan tombol ke div
          });
      } else {
          // Jika getPlaylist() tidak mengembalikan array atau kosong
          console.warn("Tidak dapat mengambil daftar video dari API secara otomatis.");
          daftarVideoContainer.innerHTML += "<p>Tidak dapat memuat daftar video secara otomatis saat ini.</p>";
          // Di sini Anda bisa menambahkan tombol manual jika tahu jumlah video dan ID nya
          // Contoh: createManualButton(0, 'ID_VIDEO_1', 'Judul Video 1 Manual');
      }
    }

    // 5. (Opsional) Fungsi untuk memantau perubahan state player
    // function onPlayerStateChange(event) {
    //    let state = event.data == YT.PlayerState.PLAYING ? "Memutar" :
    //                event.data == YT.PlayerState.PAUSED ? "Jeda" :
    //                event.data == YT.PlayerState.BUFFERING ? "Buffering" :
    //                event.data == YT.PlayerState.ENDED ? "Selesai" :
    //                event.data == YT.PlayerState.CUED ? "Siap" : "Lainnya";
    //    console.log("Status Player:", state);
    // }

  </script>

</body>
</html>
